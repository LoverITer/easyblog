(function(b){b(document).ready(function(){b("body").append('<div id="supersized-loader"></div><ul id="supersized"></ul>')});b.supersized=function(a){var f="#supersized",e=this;e.$el=b(f);e.el=f;vars=b.supersized.vars;e.$el.data("supersized",e);api=e.$el.data("supersized");e.init=function(){b.supersized.vars=b.extend(b.supersized.vars,b.supersized.themeVars);b.supersized.vars.options=b.extend({},b.supersized.defaultOptions,b.supersized.themeOptions,a);e.options=b.supersized.vars.options;e._build()};e._build=function(){var l=0,n="",c="",k,m="",d;while(l<=e.options.slides.length-1){switch(e.options.slide_links){case"num":k=l;break;case"name":k=e.options.slides[l].title;break;case"blank":k="";break}n=n+'<li class="slide-'+l+'"></li>';if(l==e.options.start_slide-1){if(e.options.slide_links){c=c+'<li class="slide-link-'+l+' current-slide"><a>'+k+"</a></li>"}if(e.options.thumb_links){e.options.slides[l].thumb?d=e.options.slides[l].thumb:d=e.options.slides[l].image;m=m+'<li class="thumb'+l+' current-thumb"><img src="'+d+'"/></li>'}}else{if(e.options.slide_links){c=c+'<li class="slide-link-'+l+'" ><a>'+k+"</a></li>"}if(e.options.thumb_links){e.options.slides[l].thumb?d=e.options.slides[l].thumb:d=e.options.slides[l].image;m=m+'<li class="thumb'+l+'"><img src="'+d+'"/></li>'}}l++}if(e.options.slide_links){b(vars.slide_list).html(c)}if(e.options.thumb_links&&vars.thumb_tray.length){b(vars.thumb_tray).append('<ul id="'+vars.thumb_list.replace("#","")+'">'+m+"</ul>")}b(e.el).append(n);if(e.options.thumbnail_navigation){vars.current_slide-1<0?prevThumb=e.options.slides.length-1:prevThumb=vars.current_slide-1;b(vars.prev_thumb).show().html(b("<img/>").attr("src",e.options.slides[prevThumb].image));vars.current_slide==e.options.slides.length-1?nextThumb=0:nextThumb=vars.current_slide+1;b(vars.next_thumb).show().html(b("<img/>").attr("src",e.options.slides[nextThumb].image))}e._start()};e._start=function(){if(e.options.start_slide){vars.current_slide=e.options.start_slide-1}else{vars.current_slide=Math.floor(Math.random()*e.options.slides.length)}var i=e.options.new_window?' target="_blank"':"";if(e.options.performance==3){e.$el.addClass("speed")}else{if((e.options.performance==1)||(e.options.performance==2)){e.$el.addClass("quality")}}if(e.options.random){arr=e.options.slides;for(var u,r,t=arr.length;t;u=parseInt(Math.random()*t),r=arr[--t],arr[t]=arr[u],arr[u]=r){}e.options.slides=arr}if(e.options.slides.length>1){if(e.options.slides.length>2){vars.current_slide-1<0?loadPrev=e.options.slides.length-1:loadPrev=vars.current_slide-1;var v=(e.options.slides[loadPrev].url)?"href='"+e.options.slides[loadPrev].url+"'":"";var c=b('<img src="'+e.options.slides[loadPrev].image+'"/>');var j=e.el+" li:eq("+loadPrev+")";c.appendTo(j).wrap("<a "+v+i+"></a>").parent().parent().addClass("image-loading prevslide");c.load(function(){b(this).data("origWidth",b(this).width()).data("origHeight",b(this).height());e.resizeNow()})}}else{e.options.slideshow=0}v=(api.getField("url"))?"href='"+api.getField("url")+"'":"";var s=b('<img src="'+api.getField("image")+'"/>');var w=e.el+" li:eq("+vars.current_slide+")";s.appendTo(w).wrap("<a "+v+i+"></a>").parent().parent().addClass("image-loading activeslide");s.load(function(){e._origDim(b(this));e.resizeNow();e.launch();if(typeof theme!="undefined"&&typeof theme._init=="function"){theme._init()}});if(e.options.slides.length>1){vars.current_slide==e.options.slides.length-1?loadNext=0:loadNext=vars.current_slide+1;v=(e.options.slides[loadNext].url)?"href='"+e.options.slides[loadNext].url+"'":"";var x=b('<img src="'+e.options.slides[loadNext].image+'"/>');var d=e.el+" li:eq("+loadNext+")";x.appendTo(d).wrap("<a "+v+i+"></a>").parent().parent().addClass("image-loading");x.load(function(){b(this).data("origWidth",b(this).width()).data("origHeight",b(this).height());e.resizeNow()})}e.$el.css("visibility","hidden");b(".load-item").hide()};e.launch=function(){e.$el.css("visibility","visible");b("#supersized-loader").remove();if(typeof theme!="undefined"&&typeof theme.beforeAnimation=="function"){theme.beforeAnimation("next")}b(".load-item").show();if(e.options.keyboard_nav){b(document.documentElement).keyup(function(c){if(vars.in_animation){return false}if((c.keyCode==37)||(c.keyCode==40)){clearInterval(vars.slideshow_interval);e.prevSlide()}else{if((c.keyCode==39)||(c.keyCode==38)){clearInterval(vars.slideshow_interval);e.nextSlide()}else{if(c.keyCode==32&&!vars.hover_pause){clearInterval(vars.slideshow_interval);e.playToggle()}}}})}if(e.options.slideshow&&e.options.pause_hover){b(e.el).hover(function(){if(vars.in_animation){return false}vars.hover_pause=true;if(!vars.is_paused){vars.hover_pause="resume";e.playToggle()}},function(){if(vars.hover_pause=="resume"){e.playToggle();vars.hover_pause=false}})}if(e.options.slide_links){b(vars.slide_list+"> li").click(function(){index=b(vars.slide_list+"> li").index(this);targetSlide=index+1;e.goTo(targetSlide);return false})}if(e.options.thumb_links){b(vars.thumb_list+"> li").click(function(){index=b(vars.thumb_list+"> li").index(this);targetSlide=index+1;api.goTo(targetSlide);return false})}if(e.options.slideshow&&e.options.slides.length>1){if(e.options.autoplay&&e.options.slides.length>1){vars.slideshow_interval=setInterval(e.nextSlide,e.options.slide_interval)}else{vars.is_paused=true}b(".load-item img").bind("contextmenu mousedown",function(){return false})}b(window).resize(function(){e.resizeNow()})};e.resizeNow=function(){return e.$el.each(function(){b("img",e.el).each(function(){thisSlide=b(this);var m=(thisSlide.data("origHeight")/thisSlide.data("origWidth")).toFixed(2);var n=e.$el.width(),k=e.$el.height(),d;if(e.options.fit_always){if((k/n)>m){l()}else{c()}}else{if((k<=e.options.min_height)&&(n<=e.options.min_width)){if((k/n)>m){e.options.fit_landscape&&m<1?l(true):c(true)}else{e.options.fit_portrait&&m>=1?c(true):l(true)}}else{if(n<=e.options.min_width){if((k/n)>m){e.options.fit_landscape&&m<1?l(true):c()}else{e.options.fit_portrait&&m>=1?c():l(true)}}else{if(k<=e.options.min_height){if((k/n)>m){e.options.fit_landscape&&m<1?l():c(true)}else{e.options.fit_portrait&&m>=1?c(true):l()}}else{if((k/n)>m){e.options.fit_landscape&&m<1?l():c()}else{e.options.fit_portrait&&m>=1?c():l()}}}}}function l(g){if(g){if(thisSlide.width()<n||thisSlide.width()<e.options.min_width){if(thisSlide.width()*m>=e.options.min_height){thisSlide.width(e.options.min_width);thisSlide.height(thisSlide.width()*m)}else{c()}}}else{if(e.options.min_height>=k&&!e.options.fit_landscape){if(n*m>=e.options.min_height||(n*m>=e.options.min_height&&m<=1)){thisSlide.width(n);thisSlide.height(n*m)}else{if(m>1){thisSlide.height(e.options.min_height);thisSlide.width(thisSlide.height()/m)}else{if(thisSlide.width()<n){thisSlide.width(n);thisSlide.height(thisSlide.width()*m)}}}}else{thisSlide.width(n);thisSlide.height(n*m)}}}function c(g){if(g){if(thisSlide.height()<k){if(thisSlide.height()/m>=e.options.min_width){thisSlide.height(e.options.min_height);thisSlide.width(thisSlide.height()/m)}else{l(true)}}}else{if(e.options.min_width>=n){if(k/m>=e.options.min_width||m>1){thisSlide.height(k);thisSlide.width(k/m)}else{if(m<=1){thisSlide.width(e.options.min_width);thisSlide.height(thisSlide.width()*m)}}}else{thisSlide.height(k);thisSlide.width(k/m)}}}if(thisSlide.parents("li").hasClass("image-loading")){b(".image-loading").removeClass("image-loading")}if(e.options.horizontal_center){b(this).css("left",(n-b(this).width())/2)}if(e.options.vertical_center){b(this).css("top",(k-b(this).height())/2)}});if(e.options.image_protect){b("img",e.el).bind("contextmenu mousedown",function(){return false})}return false})};e.nextSlide=function(){if(vars.in_animation||!api.options.slideshow){return false}else{vars.in_animation=true}clearInterval(vars.slideshow_interval);var m=e.options.slides,p=e.$el.find(".activeslide");b(".prevslide").removeClass("prevslide");p.removeClass("activeslide").addClass("prevslide");vars.current_slide+1==e.options.slides.length?vars.current_slide=0:vars.current_slide++;var n=b(e.el+" li:eq("+vars.current_slide+")"),l=e.$el.find(".prevslide");if(e.options.performance==1){e.$el.removeClass("quality").addClass("speed")}loadSlide=false;vars.current_slide==e.options.slides.length-1?loadSlide=0:loadSlide=vars.current_slide+1;var c=e.el+" li:eq("+loadSlide+")";if(!b(c).html()){var d=e.options.new_window?' target="_blank"':"";imageLink=(e.options.slides[loadSlide].url)?"href='"+e.options.slides[loadSlide].url+"'":"";var o=b('<img src="'+e.options.slides[loadSlide].image+'"/>');o.appendTo(c).wrap("<a "+imageLink+d+"></a>").parent().parent().addClass("image-loading").css("visibility","hidden");o.load(function(){e._origDim(b(this));e.resizeNow()})}if(e.options.thumbnail_navigation==1){vars.current_slide-1<0?prevThumb=e.options.slides.length-1:prevThumb=vars.current_slide-1;b(vars.prev_thumb).html(b("<img/>").attr("src",e.options.slides[prevThumb].image));nextThumb=loadSlide;b(vars.next_thumb).html(b("<img/>").attr("src",e.options.slides[nextThumb].image))}if(typeof theme!="undefined"&&typeof theme.beforeAnimation=="function"){theme.beforeAnimation("next")}if(e.options.slide_links){b(".current-slide").removeClass("current-slide");b(vars.slide_list+"> li").eq(vars.current_slide).addClass("current-slide")}n.css("visibility","hidden").addClass("activeslide");switch(e.options.transition){case 0:case"none":n.css("visibility","visible");vars.in_animation=false;e.afterAnimation();break;case 1:case"fade":n.animate({opacity:0},0).css("visibility","visible").animate({opacity:1,avoidTransforms:false},e.options.transition_speed,function(){e.afterAnimation()});break;case 2:case"slideTop":n.animate({top:-e.$el.height()},0).css("visibility","visible").animate({top:0,avoidTransforms:false},e.options.transition_speed,function(){e.afterAnimation()});break;case 3:case"slideRight":n.animate({left:e.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:false},e.options.transition_speed,function(){e.afterAnimation()});break;case 4:case"slideBottom":n.animate({top:e.$el.height()},0).css("visibility","visible").animate({top:0,avoidTransforms:false},e.options.transition_speed,function(){e.afterAnimation()});break;case 5:case"slideLeft":n.animate({left:-e.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:false},e.options.transition_speed,function(){e.afterAnimation()});break;case 6:case"carouselRight":n.animate({left:e.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:false},e.options.transition_speed,function(){e.afterAnimation()});p.animate({left:-e.$el.width(),avoidTransforms:false},e.options.transition_speed);break;case 7:case"carouselLeft":n.animate({left:-e.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:false},e.options.transition_speed,function(){e.afterAnimation()});p.animate({left:e.$el.width(),avoidTransforms:false},e.options.transition_speed);break}return false};e.prevSlide=function(){if(vars.in_animation||!api.options.slideshow){return false}else{vars.in_animation=true}clearInterval(vars.slideshow_interval);var m=e.options.slides,p=e.$el.find(".activeslide");b(".prevslide").removeClass("prevslide");p.removeClass("activeslide").addClass("prevslide");vars.current_slide==0?vars.current_slide=e.options.slides.length-1:vars.current_slide--;var n=b(e.el+" li:eq("+vars.current_slide+")"),l=e.$el.find(".prevslide");if(e.options.performance==1){e.$el.removeClass("quality").addClass("speed")}loadSlide=vars.current_slide;var c=e.el+" li:eq("+loadSlide+")";if(!b(c).html()){var d=e.options.new_window?' target="_blank"':"";imageLink=(e.options.slides[loadSlide].url)?"href='"+e.options.slides[loadSlide].url+"'":"";var o=b('<img src="'+e.options.slides[loadSlide].image+'"/>');o.appendTo(c).wrap("<a "+imageLink+d+"></a>").parent().parent().addClass("image-loading").css("visibility","hidden");o.load(function(){e._origDim(b(this));e.resizeNow()})}if(e.options.thumbnail_navigation==1){loadSlide==0?prevThumb=e.options.slides.length-1:prevThumb=loadSlide-1;b(vars.prev_thumb).html(b("<img/>").attr("src",e.options.slides[prevThumb].image));vars.current_slide==e.options.slides.length-1?nextThumb=0:nextThumb=vars.current_slide+1;b(vars.next_thumb).html(b("<img/>").attr("src",e.options.slides[nextThumb].image))}if(typeof theme!="undefined"&&typeof theme.beforeAnimation=="function"){theme.beforeAnimation("prev")}if(e.options.slide_links){b(".current-slide").removeClass("current-slide");b(vars.slide_list+"> li").eq(vars.current_slide).addClass("current-slide")}n.css("visibility","hidden").addClass("activeslide");switch(e.options.transition){case 0:case"none":n.css("visibility","visible");vars.in_animation=false;e.afterAnimation();break;case 1:case"fade":n.animate({opacity:0},0).css("visibility","visible").animate({opacity:1,avoidTransforms:false},e.options.transition_speed,function(){e.afterAnimation()});break;case 2:case"slideTop":n.animate({top:e.$el.height()},0).css("visibility","visible").animate({top:0,avoidTransforms:false},e.options.transition_speed,function(){e.afterAnimation()});break;case 3:case"slideRight":n.animate({left:-e.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:false},e.options.transition_speed,function(){e.afterAnimation()});break;case 4:case"slideBottom":n.animate({top:-e.$el.height()},0).css("visibility","visible").animate({top:0,avoidTransforms:false},e.options.transition_speed,function(){e.afterAnimation()});break;case 5:case"slideLeft":n.animate({left:e.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:false},e.options.transition_speed,function(){e.afterAnimation()});break;case 6:case"carouselRight":n.animate({left:-e.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:false},e.options.transition_speed,function(){e.afterAnimation()});p.animate({left:0},0).animate({left:e.$el.width(),avoidTransforms:false},e.options.transition_speed);break;case 7:case"carouselLeft":n.animate({left:e.$el.width()},0).css("visibility","visible").animate({left:0,avoidTransforms:false},e.options.transition_speed,function(){e.afterAnimation()});p.animate({left:0},0).animate({left:-e.$el.width(),avoidTransforms:false},e.options.transition_speed);break}return false};e.playToggle=function(){if(vars.in_animation||!api.options.slideshow){return false}if(vars.is_paused){vars.is_paused=false;if(typeof theme!="undefined"&&typeof theme.playToggle=="function"){theme.playToggle("play")}vars.slideshow_interval=setInterval(e.nextSlide,e.options.slide_interval)}else{vars.is_paused=true;if(typeof theme!="undefined"&&typeof theme.playToggle=="function"){theme.playToggle("pause")}clearInterval(vars.slideshow_interval)}return false};e.goTo=function(c){if(vars.in_animation||!api.options.slideshow){return false}var d=e.options.slides.length;if(c<0){c=d}else{if(c>d){c=1}}c=d-c+1;clearInterval(vars.slideshow_interval);if(typeof theme!="undefined"&&typeof theme.goTo=="function"){theme.goTo()}if(vars.current_slide==d-c){if(!(vars.is_paused)){vars.slideshow_interval=setInterval(e.nextSlide,e.options.slide_interval)}return false}if(d-c>vars.current_slide){vars.current_slide=d-c-1;vars.update_images="next";e._placeSlide(vars.update_images)}else{if(d-c<vars.current_slide){vars.current_slide=d-c+1;vars.update_images="prev";e._placeSlide(vars.update_images)}}if(e.options.slide_links){b(vars.slide_list+"> .current-slide").removeClass("current-slide");b(vars.slide_list+"> li").eq((d-c)).addClass("current-slide")}if(e.options.thumb_links){b(vars.thumb_list+"> .current-thumb").removeClass("current-thumb");b(vars.thumb_list+"> li").eq((d-c)).addClass("current-thumb")}};e._placeSlide=function(j){var c=e.options.new_window?' target="_blank"':"";loadSlide=false;if(j=="next"){vars.current_slide==e.options.slides.length-1?loadSlide=0:loadSlide=vars.current_slide+1;var d=e.el+" li:eq("+loadSlide+")";if(!b(d).html()){var c=e.options.new_window?' target="_blank"':"";imageLink=(e.options.slides[loadSlide].url)?"href='"+e.options.slides[loadSlide].url+"'":"";var i=b('<img src="'+e.options.slides[loadSlide].image+'"/>');i.appendTo(d).wrap("<a "+imageLink+c+"></a>").parent().parent().addClass("image-loading").css("visibility","hidden");i.load(function(){e._origDim(b(this));e.resizeNow()})}e.nextSlide()}else{if(j=="prev"){vars.current_slide-1<0?loadSlide=e.options.slides.length-1:loadSlide=vars.current_slide-1;var d=e.el+" li:eq("+loadSlide+")";if(!b(d).html()){var c=e.options.new_window?' target="_blank"':"";imageLink=(e.options.slides[loadSlide].url)?"href='"+e.options.slides[loadSlide].url+"'":"";var i=b('<img src="'+e.options.slides[loadSlide].image+'"/>');i.appendTo(d).wrap("<a "+imageLink+c+"></a>").parent().parent().addClass("image-loading").css("visibility","hidden");i.load(function(){e._origDim(b(this));e.resizeNow()})}e.prevSlide()}}};e._origDim=function(c){c.data("origWidth",c.width()).data("origHeight",c.height())};e.afterAnimation=function(){if(e.options.performance==1){e.$el.removeClass("speed").addClass("quality")}if(vars.update_images){vars.current_slide-1<0?setPrev=e.options.slides.length-1:setPrev=vars.current_slide-1;vars.update_images=false;b(".prevslide").removeClass("prevslide");b(e.el+" li:eq("+setPrev+")").addClass("prevslide")}vars.in_animation=false;if(!vars.is_paused&&e.options.slideshow){vars.slideshow_interval=setInterval(e.nextSlide,e.options.slide_interval);if(e.options.stop_loop&&vars.current_slide==e.options.slides.length-1){e.playToggle()}}if(typeof theme!="undefined"&&typeof theme.afterAnimation=="function"){theme.afterAnimation()}return false};e.getField=function(c){return e.options.slides[vars.current_slide][c]};e.init()};b.supersized.vars={thumb_tray:"#thumb-tray",thumb_list:"#thumb-list",slide_list:"#slide-list",current_slide:0,in_animation:false,is_paused:false,hover_pause:false,slideshow_interval:false,update_images:false,options:{}};b.supersized.defaultOptions={slideshow:1,autoplay:1,start_slide:1,stop_loop:0,random:0,slide_interval:5000,transition:1,transition_speed:750,new_window:1,pause_hover:0,keyboard_nav:1,performance:1,image_protect:1,fit_always:0,fit_landscape:0,fit_portrait:1,min_width:0,min_height:0,horizontal_center:1,vertical_center:1,slide_links:1,thumb_links:1,thumbnail_navigation:0};b.fn.supersized=function(a){return this.each(function(){(new b.supersized(a))})}})(jQuery);